[
  {
    "type": "constructor",
    "inputs": [
      {
        "name": "_treasury",
        "type": "address",
        "description": "Treasury account address for receiving fees"
      }
    ]
  },
  {
    "type": "function",
    "name": "createMembership",
    "inputs": [],
    "outputs": [],
    "stateMutability": "payable",
    "description": "Create membership by depositing exactly 1 HBAR. Mints and transfers 1 DRIP token.",
    "requirements": [
      "Must send exactly 1 HBAR (100000000 tinybars)",
      "Account must not already have membership",
      "Contract must not be paused"
    ],
    "effects": [
      "Mints 1 DRIP token to sender",
      "Creates member record with 1000 WISH quota",
      "Freezes DRIP token (non-transferable)",
      "Emits MembershipCreated event"
    ]
  },
  {
    "type": "function", 
    "name": "claimWish",
    "inputs": [
      {
        "name": "amount",
        "type": "uint256",
        "description": "Amount of WISH tokens to claim (1-500 per transaction)"
      }
    ],
    "outputs": [],
    "stateMutability": "nonpayable",
    "description": "Claim WISH reward tokens up to 1000 lifetime cap. AutoRelease triggers at 1000.",
    "requirements": [
      "Must be active member with DRIP token",
      "Amount must be 1-500 WISH per transaction",
      "Must have sufficient remaining quota",
      "Must not have reached 1000 cap already"
    ],
    "effects": [
      "Mints WISH tokens to sender",
      "Updates member quota tracking",
      "Triggers AutoRelease if 1000 cap reached",
      "Emits WishClaimed event"
    ]
  },
  {
    "type": "function",
    "name": "redeemDrip",
    "inputs": [],
    "outputs": [],
    "stateMutability": "nonpayable",
    "description": "Manually redeem DRIP token for 0.8 HBAR refund after reaching 1000 WISH cap.",
    "requirements": [
      "Must be active member",
      "Must have reached 1000 WISH cap",
      "Must still have DRIP token",
      "Contract must have sufficient balance"
    ],
    "effects": [
      "Burns member's DRIP token",
      "Transfers 0.8 HBAR to member",
      "Transfers 0.2 HBAR to Treasury",
      "Marks member as inactive",
      "Emits DripRedeemed event"
    ]
  },
  {
    "type": "function",
    "name": "getMemberInfo",
    "inputs": [
      {
        "name": "member",
        "type": "address",
        "description": "Member account address to query"
      }
    ],
    "outputs": [
      {
        "name": "dripTokens",
        "type": "uint256",
        "description": "Number of DRIP tokens (0 or 1)"
      },
      {
        "name": "wishClaimed",
        "type": "uint256",
        "description": "Total WISH tokens claimed so far"
      },
      {
        "name": "remainingWish",
        "type": "uint256",
        "description": "WISH quota remaining (max 1000 total)"
      },
      {
        "name": "depositDate",
        "type": "uint256",
        "description": "Timestamp when membership was created"
      },
      {
        "name": "isActive",
        "type": "bool",
        "description": "Whether membership is currently active"
      },
      {
        "name": "capReached",
        "type": "bool",
        "description": "Whether 1000 WISH cap has been reached"
      }
    ],
    "stateMutability": "view",
    "description": "Get comprehensive member information and status"
  },
  {
    "type": "function",
    "name": "canCreateMembership",
    "inputs": [
      {
        "name": "account",
        "type": "address"
      }
    ],
    "outputs": [
      {
        "name": "",
        "type": "bool",
        "description": "Whether account can create membership"
      }
    ],
    "stateMutability": "view",
    "description": "Check if address is eligible to create membership"
  },
  {
    "type": "function",
    "name": "canClaimWish",
    "inputs": [
      {
        "name": "account",
        "type": "address"
      }
    ],
    "outputs": [
      {
        "name": "",
        "type": "bool",
        "description": "Whether account can claim WISH"
      },
      {
        "name": "",
        "type": "uint256", 
        "description": "Maximum WISH amount that can be claimed"
      }
    ],
    "stateMutability": "view",
    "description": "Check WISH claiming eligibility and available quota"
  },
  {
    "type": "function",
    "name": "canRedeemDrip",
    "inputs": [
      {
        "name": "account",
        "type": "address"
      }
    ],
    "outputs": [
      {
        "name": "",
        "type": "bool",
        "description": "Whether account can redeem DRIP"
      }
    ],
    "stateMutability": "view",
    "description": "Check if address is eligible for DRIP redemption"
  },
  {
    "type": "function",
    "name": "getContractStats",
    "inputs": [],
    "outputs": [
      {
        "name": "_totalMembers",
        "type": "uint256"
      },
      {
        "name": "_totalWishClaimed", 
        "type": "uint256"
      },
      {
        "name": "_totalMembersAtCap",
        "type": "uint256"
      },
      {
        "name": "_contractBalance",
        "type": "uint256"
      },
      {
        "name": "_isPaused",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "description": "Get overall protocol statistics"
  },
  {
    "type": "event",
    "name": "MembershipCreated",
    "inputs": [
      {
        "name": "member",
        "type": "address",
        "indexed": true
      },
      {
        "name": "dripTokens",
        "type": "uint256",
        "indexed": true
      },
      {
        "name": "maxWishQuota",
        "type": "uint256",
        "indexed": true
      },
      {
        "name": "depositAmount",
        "type": "uint256"
      },
      {
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "description": "Emitted when user creates membership with 1 HBAR deposit"
  },
  {
    "type": "event",
    "name": "WishClaimed",
    "inputs": [
      {
        "name": "member",
        "type": "address",
        "indexed": true
      },
      {
        "name": "amount",
        "type": "uint256",
        "indexed": true
      },
      {
        "name": "totalClaimed",
        "type": "uint256",
        "indexed": true
      },
      {
        "name": "remainingQuota",
        "type": "uint256"
      },
      {
        "name": "capReached",
        "type": "bool"
      }
    ],
    "description": "Emitted when member claims WISH tokens"
  },
  {
    "type": "event",
    "name": "DripRedeemed",
    "inputs": [
      {
        "name": "member",
        "type": "address",
        "indexed": true
      },
      {
        "name": "refundAmount",
        "type": "uint256",
        "indexed": true
      },
      {
        "name": "treasuryFee",
        "type": "uint256",
        "indexed": true
      },
      {
        "name": "totalWishClaimed",
        "type": "uint256"
      },
      {
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "description": "Emitted when member redeems DRIP for HBAR (lifecycle completion)"
  },
  {
    "type": "event",
    "name": "AutoReleaseTriggered",
    "inputs": [
      {
        "name": "member",
        "type": "address",
        "indexed": true
      },
      {
        "name": "refundAmount",
        "type": "uint256",
        "indexed": true
      },
      {
        "name": "finalWishClaimed",
        "type": "uint256",
        "indexed": true
      },
      {
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "description": "Emitted when AutoRelease is triggered at 1000 WISH cap"
  }
]